import React, { useState, useEffect } from 'react';
import { initializeApp } from 'firebase/app';
import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from 'firebase/auth';
import { getFirestore, collection, addDoc, serverTimestamp } from 'firebase/firestore';
import { ShoppingBag, Truck, Globe, ShieldCheck, Check, ArrowRight, Instagram, Facebook, MessageCircle, ChevronRight, PackageSearch } from 'lucide-react';

const firebaseConfig = JSON.parse(__firebase_config);
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
const appId = typeof __app_id !== 'undefined' ? __app_id : 'kash-option-leads';

const App = () => {
const [user, setUser] = useState(null);
const [formData, setFormData] = useState({ name: '', phone: '', interest: 'Personal Shopping' });
const [loading, setLoading] = useState(false);
const [submitted, setSubmitted] = useState(false);
const [scrolled, setScrolled] = useState(false);
const [delivery, setDelivery] = useState({ city: 'Accra Mall', time: '2 mins ago' });

useEffect(() => {
const cities = [
'Accra Mall Area', 'Kumasi City Mall', 'Takoradi Harbor', 'East Legon, Accra',
'London Victoria', 'Milan Fashion Dist.', 'Lagos Island', 'Paris, France',
'Tema Community 1', 'Cape Coast Central', 'Oxford Street, Osu', 'Manchester, UK'
];

const interval = setInterval(() => {
const randomCity = cities[Math.floor(Math.random() * cities.length)];
const randomMin = Math.floor(Math.random() * 59) + 1;
setDelivery({ city: randomCity, time: `${randomMin} mins ago` });
}, 5000);

const handleScroll = () => setScrolled(window.scrollY > 20);
window.addEventListener('scroll', handleScroll);

const initAuth = async () => {
try {
if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
await signInWithCustomToken(auth, __initial_auth_token);
} else {
await signInAnonymously(auth);
}
} catch (err) { console.error("Auth error", err); }
};
initAuth();
const unsubscribe = onAuthStateChanged(auth, setUser);
return () => {
unsubscribe();
clearInterval(interval);
window.removeEventListener('scroll', handleScroll);
};
}, []);

const handleSubmit = async (e) => {
e.preventDefault();
if (!user) return;
setLoading(true);
try {
await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'leads'), {
...formData,
timestamp: serverTimestamp(),
userId: user.uid
});
setSubmitted(true);
} catch (err) { console.error("Error saving lead:", err); }
finally { setLoading(false); }
};

return (
<div className="min-h-screen bg-[#FDFDFD] text-slate-900 selection:bg-blue-100 font-sans antialiased">
<nav className={`fixed top-0 w-full z-[100] transition-all duration-500 ${scrolled ? 'bg-white/80 backdrop-blur-xl py-3 border-b border-slate-100 shadow-sm' : 'bg-transparent py-6'}`}>
<div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
<div className="flex items-center gap-2 cursor-pointer" onClick={() => window.scrollTo({top: 0, behavior: 'smooth'})}>
<div className="w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white shadow-lg">
<Truck size={22} strokeWidth={2.5} />
</div>
<div className="flex flex-col leading-none">
<h1 className="text-xl font-black tracking-tighter">KASH OPTION</h1>
<span className="text-[10px] font-bold text-blue-600 uppercase tracking-widest">Global Logistics</span>
</div>
</div>
<div className="hidden md:flex items-center gap-8">
<a href="#services" className="text-sm font-semibold hover:text-blue-600 transition">Services</a>
<a href="tracker.html" className="bg-slate-900 text-white px-6 py-2.5 rounded-full text-sm font-bold hover:bg-blue-600 transition flex items-center gap-2">
<PackageSearch size={16} /> Track Order
</a>
</div>
</div>
</nav>

<header className="relative pt-32 pb-20 overflow-hidden">
<div className="max-w-7xl mx-auto px-6 grid lg:grid-cols-2 gap-12 items-center">
<div className="space-y-8">
<div className="inline-flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-full text-xs font-black uppercase tracking-wider">
<ShieldCheck size={14} /> 100% Secure International Sourcing
</div>
<h2 className="text-6xl md:text-8xl font-[900] tracking-tighter leading-[0.9]">
Shop Globally. <br/><span className="bg-gradient-to-r from-blue-600 to-indigo-500 bg-clip-text text-transparent">Receive Locally.</span>
</h2>
<p className="text-lg md:text-xl text-slate-500 font-medium max-w-lg leading-relaxed">
We eliminate the stress of importing. From China factories to European boutiques, we bring the world to your doorstep.
</p>
<div className="flex flex-wrap gap-4 pt-4">
<a href="https://wa.me/message/GKVHLNYNL7AEJ1" className="bg-blue-600 text-white px-8 py-5 rounded-2xl font-black text-lg hover:bg-blue-700 transition shadow-2xl shadow-blue-200 flex items-center gap-3">
SHOP NOW <ChevronRight size={20} />
</a>
<a href="tracker.html" className="md:hidden w-full bg-slate-100 text-slate-900 px-8 py-5 rounded-2xl font-black text-lg text-center">TRACK ORDER</a>
</div>
</div>

<div className="relative">
<div className="relative z-10 aspect-[4/5] rounded-[3rem] overflow-hidden shadow-2xl group">
<img src="https://images.unsplash.com/photo-1549463599-231a53245e60?q=80&w=2070&auto=format&fit=crop" className="w-full h-full object-cover" alt="Shopper" />
<div className="absolute inset-0 bg-gradient-to-t from-blue-900/40 to-transparent"></div>

<div className="absolute bottom-8 left-8 right-8 bg-white/20 backdrop-blur-2xl p-6 rounded-3xl border border-white/30 text-white transition-all duration-1000">
<div className="flex items-center gap-4">
<div className="w-12 h-12 bg-green-500 rounded-full flex items-center justify-center shadow-lg"><Check size={24} /></div>
<div className="flex-1">
<p className="text-sm font-bold">Latest Delivery!</p>
<p className="text-xs opacity-90 font-medium uppercase tracking-tighter">{delivery.city} â€¢ {delivery.time}</p>
</div>
</div>
</div>
</div>
</div>
</div>
</header>

<section id="services" className="py-24 bg-slate-50">
<div className="max-w-7xl mx-auto px-6 grid md:grid-cols-3 gap-8">
{[
{ icon: <ShoppingBag />, title: "Personal Shopping", desc: "Found items on Shein or Amazon? We buy, consolidate, and ship for you." },
{ icon: <Globe />, title: "Business Sourcing", desc: "Access 1688 and Alibaba factories. We negotiate and verify for you." },
{ icon: <Truck />, title: "Door-to-Door", desc: "We deliver straight to your home anywhere in Ghana and West Africa." }
].map((s, idx) => (
<div key={idx} className="bg-white p-10 rounded-[2.5rem] border border-slate-100 hover:shadow-2xl transition">
<div className="w-14 h-14 bg-slate-50 rounded-2xl flex items-center justify-center text-blue-600 mb-8">{s.icon}</div>
<h4 className="text-2xl font-black mb-4">{s.title}</h4>
<p className="text-slate-500 leading-relaxed font-medium">{s.desc}</p>
</div>
))}
</div>
</section>

<section id="quote" className="py-24 px-6 bg-white">
<div className="max-w-xl mx-auto bg-slate-900 p-10 rounded-[3.5rem] text-white shadow-2xl">
{!submitted ? (
<form onSubmit={handleSubmit} className="space-y-6">
<h3 className="text-3xl font-black mb-6 text-center italic">Get a Quick Quote</h3>
<input required placeholder="Full Name" className="w-full bg-slate-800 p-5 rounded-2xl outline-none" value={formData.name} onChange={(e)=>setFormData({...formData, name:e.target.value})} />
<input required type="tel" placeholder="WhatsApp Number" className="w-full bg-slate-800 p-5 rounded-2xl outline-none" value={formData.phone} onChange={(e)=>setFormData({...formData, phone:e.target.value})} />
<select className="w-full bg-slate-800 p-5 rounded-2xl outline-none cursor-pointer" value={formData.interest} onChange={(e)=>setFormData({...formData, interest:e.target.value})}>
<option>Personal Shopping</option>
<option>Business Sourcing</option>
<option>Bulk Logistics</option>
</select>
<button disabled={loading} type="submit" className="w-full bg-blue-600 py-5 rounded-2xl font-black text-lg hover:bg-blue-500 transition">{loading ? 'Processing...' : 'Request Quote'}</button>
</form>
) : (
<div className="text-center py-10">
<div className="w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-6"><Check size={40} /></div>
<h3 className="text-2xl font-black">Success!</h3>
<p className="text-slate-400">Mr. Kash will message you on WhatsApp shortly.</p>
</div>
)}
</div>
</section>

<footer className="bg-slate-950 text-white pt-24 pb-12 px-6">
<div className="max-w-7xl mx-auto">
<div className="flex flex-col md:flex-row justify-between items-center gap-12 border-b border-slate-900 pb-12">
<div className="text-center md:text-left">
<h1 className="text-2xl font-black tracking-tighter uppercase">Kash Option</h1>
<p className="text-slate-500 text-xs font-bold uppercase mt-2">Connecting global markets to Ghana.</p>
</div>
<div className="flex gap-4">
<a href="https://www.instagram.com/kashoption1" target="_blank" className="w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center hover:bg-blue-600 transition"><Instagram size={24}/></a>
<a href="https://wa.me/message/GKVHLNYNL7AEJ1" target="_blank" className="w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center hover:bg-blue-600 transition"><MessageCircle size={24}/></a>
<a href="https://www.facebook.com/share/1DBXvubuyN" target="_blank" className="w-14 h-14 bg-slate-900 rounded-2xl flex items-center justify-center hover:bg-blue-600 transition"><Facebook size={24}/></a>
</div>
</div>
<div className="flex justify-between items-center pt-8 text-[10px] font-bold text-slate-700 uppercase tracking-widest">
<p>&copy; 2025 KASH OPTION LOGISTICS</p>
<div className="flex gap-6">
<a href="tracker.html" className="hover:text-blue-500">Track Package</a>
<a href="#quote" className="hover:text-blue-500">Inquire</a>
</div>
</div>
</div>
</footer>
</div>
);
};

export default App;
